<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
      crossorigin="anonymous"
    ></script>
    <script src="https://cdn.jsdelivr.net/pyodide/dev/full/pyodide.js"></script>
    <link rel="stylesheet" href="/node_modules/xterm/css/xterm.css" />
    <script src="/node_modules/xterm/lib/xterm.js"></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/6.65.7/codemirror.min.js"
      integrity="sha512-8RnEqURPUc5aqFEN04aQEiPlSAdE0jlFS/9iGgUyNtwFnSKCXhmB6ZTNl7LnDtDWKabJIASzXrzD0K+LYexU9g=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/6.65.7/codemirror.min.css"
    />
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/6.65.7/mode/python/python.min.js"
      integrity="sha512-2M0GdbU5OxkGYMhakED69bw0c1pW3Nb0PeF3+9d+SnwN1ryPx3wiDdNqK3gSM7KAU/pEV+2tFJFbMKjKAahOkQ=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <script src="/js/codemirror/active-line.js"></script>
    <!-- <script src="/js/python/python-hint.js"></script> -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/6.65.7/addon/hint/show-hint.min.css"
      integrity="sha512-OmcLQEy8iGiD7PSm85s06dnR7G7C9C0VqahIPAj/KHk5RpOCmnC6R2ob1oK4/uwYhWa9BF1GC6tzxsC8TIx7Jg=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/6.65.7/addon/hint/show-hint.min.js"
      integrity="sha512-yhmeAerubMLaGAsyS7sE8Oqub6GeTkBDQpkXo2JKHgg7JOCudQvcbDQc5rPxdl7MqcDusTJzSy+ODlyzAwETfQ=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <link rel="stylesheet" href="/css/theme/dracula.css" />

    <title>Python terminal</title>
  </head>
  <body>
    <script>
      if (!crossOriginIsolated) SharedArrayBuffer = ArrayBuffer;
    </script>
    <div class="container" style="float: none; margin: 100 auto">
      <div class="col-md-12" style="float: none; margin: 0 auto">
        <h2><b>Web Worker & Terminal 테스트</b></h2>
        <p>파이오다이드(Pyodide) 출력 및 입력 테스트 페이지 입니다.</p>
        <textarea class="Codemirror" id="code"></textarea>

        <div class="mt-2">
          <button class="btn btn-primary" id="run" disabled>RUN</button>
          <button class="btn btn-primary" id="consoleclear" disabled>
            Clear
          </button>
          <button class="btn btn-primary" id="clear" disabled>Clear All</button>
        </div>

        <div class="mt-4"></div>
        <div>터미널 :</div>
        <div id="terminal"></div>
      </div>
    </div>
    <script type="module" src="index.js"></script>
    <script type="module" src="/js/wasm/worker-manager.js"></script>
    <script type="text/javascript">
      var editor = CodeMirror.fromTextArea(document.getElementById("code"), {
        autofocus: true,
        theme: "dracula",
        lineWrapping: true,
        lineNumbers: true,
        styleActiveLine: true,
        matchBrackets: true,

        extraKeys: {
          "Ctrl-Space": "autocomplete",
        },
        hint: CodeMirror.hint.pythonHint,
      });

      // editor.on("keyup", function (editor, event) {
      //   // type code and show autocomplete hint in the meanwhile
      //   CodeMirror.commands.autocomplete(editor);
      // });
    </script>
  </body>
</html>
